<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace = "goodsMapper">
  
  
  	<resultMap type="Goods" id="goods_rm">
   
   		<id property="goodsNo" column="GOODS_NO"/>
   		
   		<result property="sellerNo" column="SELLER_NO"></result>
   		<result property="categoryNo" column="CATEGORY_NO"></result>
   		<result property="title" column="TITLE"></result>
   		<result property="sellPrice" column="SELL_PRICE"></result>
   		<result property="viewCount" column="VIEW_COUNT"></result>
   		<result property="description" column="DESCRIPTION"></result>
   		<result property="refreshedAt" column="REFRESHRED_AT"></result>
   		<result property="createdAt" column="CREATED_AT"></result>
   		<result property="goodsDelFlag" column="GOODS_DEL_FL"></result>
   		<result property="imageNo" column="IMAGE_NO"></result>
   		<result property="imagePath" column="IMAGE_PATH"></result>
   		<result property="orderNo" column="ORDER_NO"></result>
 	</resultMap>
 	 
 	 
	<resultMap type="GoodsImage" id="goodsImage_rm">
	
		<id property="goodsNo" column="GOODS_NO"/>
   		
   		<result property="imageNo" column="IMAGE_NO"></result>
   		<result property="imagePath" column="IMAGE_PATH"></result>
	
	</resultMap>
 	 
 	 
 	 <insert id="registerGoods" parameterType="Goods">
 	 	INSERT INTO GOODS_SELL	
		VALUES(SEQ_GOODS_NO.NEXTVAL, #{sellerNo}, NULL, #{categoryNo}, #{title}, 
		#{sellPrice}, DEFAULT, #{description}, NULL, DEFAULT, DEFAULT)
 	 </insert>
 	 
 	 
 	 
 	 <select id="selectMyGoods" resultType="_int">
 	 	SELECT GOODS_NO FROM(
		SELECT GOODS_NO FROM GOODS_SELL
		ORDER BY CREATED_AT DESC)
		WHERE ROWNUM <![CDATA[<= 1]]>
 	 </select>
 	 
 	 
 	 <insert id="registerImage" parameterType="GoodsImage">
 	 	INSERT INTO GOODS_IMAGE
 	 	VALUES(SEQ_IMAGE_NO.NEXTVAL, #{goodsNo}, #{imagePath})
 	 </insert>
  
</mapper>
